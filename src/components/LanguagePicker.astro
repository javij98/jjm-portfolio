---
import type { Locale, UiLabels } from "../i18n/ui";

export interface Props {
  currentLang: Locale;
  pathname: string;
  labels: UiLabels["language"];
}

const { currentLang, pathname, labels }: Props = Astro.props;

const getHrefForLang = (targetLang: Locale): string => {
  const segments = pathname.split("/").filter(Boolean);

  if (segments[0] === "es" || segments[0] === "en") {
    segments[0] = targetLang;
  } else {
    segments.unshift(targetLang);
  }

  return `/${segments.join("/")}`;
};

const esHref = getHrefForLang("es");
const enHref = getHrefForLang("en");
---

<div
  class="inline-flex items-center gap-1 rounded-md border border-white/10 bg-slate-900/50 px-2 py-1 font-mono text-[10px] sm:text-[11px]"
>
  <a
    href={esHref}
    aria-current={currentLang === "es" ? "page" : undefined}
    class={`transition-colors ${currentLang === "es" ? "text-accent-300" : "text-slate-500 hover:text-slate-300"}`}
  >
    {labels.es}
  </a>
  <span class="text-slate-600">|</span>
  <a
    href={enHref}
    aria-current={currentLang === "en" ? "page" : undefined}
    class={`transition-colors ${currentLang === "en" ? "text-accent-300" : "text-slate-500 hover:text-slate-300"}`}
  >
    {labels.en}
  </a>
</div>
